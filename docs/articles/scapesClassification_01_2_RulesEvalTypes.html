<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rule evaluation and types • scapesClassification</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Rule evaluation and types">
<meta property="og:description" content="scapesClassification">
<meta property="og:image" content="https://ghtaranto.github.io/scapesClassification/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-light navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">scapesClassification</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Implementation
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Implementation</li>
    <li>
      <a href="../articles/scapesClassification_01_1_FormatInputs.html">Format inputs</a>
    </li>
    <li>
      <a href="../articles/scapesClassification_01_2_RulesEvalTypes.html">Rule evaluation and types</a>
    </li>
    <li>
      <a href="../articles/scapesClassification_01_3_ClassFunctions.html">Classification functions</a>
    </li>
    <li>
      <a href="../articles/scapesClassification_01_4_ObjFunctions.html">Object functions</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Example
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Geomorphic management units (GMUs)</li>
    <li>
      <a href="../articles/scapesClassification_02_1_DATA.html">Format input data</a>
    </li>
    <li>
      <a href="../articles/scapesClassification_02_2_ISU.html">Island shelf unit (ISU)</a>
    </li>
    <li>
      <a href="../articles/scapesClassification_02_3_PKS.html">Peak cells (PCs)</a>
    </li>
    <li>
      <a href="../articles/scapesClassification_02_4_OBJ.html">Relief unit (RU) and raster objects (ROs)</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ghTaranto/scapesClassification" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="scapesClassification_01_2_RulesEvalTypes_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Rule evaluation and types</h1>
                        <h4 data-toc-skip class="author">Gerald H. Taranto</h4>
            
            <h4 data-toc-skip class="date">Wed 09, March, 2022</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ghTaranto/scapesClassification/blob/HEAD/vignettes/articles/scapesClassification_01_2_RulesEvalTypes.Rmd" class="external-link"><code>vignettes/articles/scapesClassification_01_2_RulesEvalTypes.Rmd</code></a></small>
      <div class="hidden name"><code>scapesClassification_01_2_RulesEvalTypes.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="rule-evaluation">Rule evaluation<a class="anchor" aria-label="anchor" href="#rule-evaluation"></a>
</h2>
<p>One of the differences between <code>scapesClassification</code> and other raster classification software is the way classification rules are evaluated. As presented in the next paragraphs, most of the package functions present a focal evaluation of classification rules.</p>
<p>A second major difference is in the diversity of relative and absolute conditions that <code>scapesClassification</code> functions can evaluate.</p>
<div class="section level3">
<h3 id="en">Evaluation neighborhood<a class="anchor" aria-label="anchor" href="#en"></a>
</h3>
<p><code>(scapes)Classifications</code> take into account the spatial relationships existing among distinct groups of cells (<a href="scapesClassification_01_2_RuleEvaluation.html#focal-evaluation">class contiguity and continuity</a>). The <strong><em>evaluation neighborhood</em></strong>, in which focal evaluations take place, is composed of the following elements (<a href="#figure1">Figure 1</a>):</p>
<ul>
<li><p><strong>Focal cell.</strong> Cell whose neighbors are evaluated against the classification rule(s).</p></li>
<li><p><strong>Test cell.</strong> Cell in the neighborhood of the focal cell that is being tested. At turns all cells in the neighborhood of a focal cell are tested against the classification rule(s).</p></li>
<li><p><strong>Focal and test cells neighborhoods</strong>. The neighborhoods of focal and test cells (see <a href="scapesClassification_01_1_FormatInputs.html#list-of-neighborhoods">cell neighborhoods</a>).</p></li>
<li><p><strong>Directional neighborhood.</strong> The set of cells included both in the focal and in the test cell neighborhoods.</p></li>
</ul>
<p><a id="figure1"></a></p>
<p><img src="scapesClassification_01_2_RulesEvalTypes_files/figure-html/eval_ngb-1.png" width="90%" style="display: block; margin: auto;"></p>
<div style="line-height: 0.9em; margin-bottom: 1.5em;">
<span class="legend"><strong>Figure 1 - Evaluation neighborhood</strong>. Focal cell, test cell and neighborhoods.</span>
</div>
</div>
<div class="section level3">
<h3 id="global-evaluation">Global evaluation<a class="anchor" aria-label="anchor" href="#global-evaluation"></a>
</h3>
<p><strong><em>Global evaluation functions:</em></strong> <code><a href="../reference/cond.4.all.html">cond.4.all()</a></code>.</p>
<p>Classification rules are applied to all raster cells regardless of their position on the raster (<a href="#figure2">Figure 2</a>). Global evaluations are not very common in <code>scapesClassification</code>.</p>
<p><a id="figure2"></a></p>
<p><img src="scapesClassification_01_2_RulesEvalTypes_files/figure-html/g_eval-1.png" width="90%" style="display: block; margin: auto;"></p>
<div style="line-height: 0.9em; margin-bottom: 1.5em;">
<span class="legend"><strong>Figure 2 - Global evaluation</strong>. All raster cells are evaluated against the classification rule. <strong>(a)</strong> Before applying the classification rule; <strong>(b)</strong> after applying the classification rule.</span>
</div>
</div>
<div class="section level3">
<h3 id="focal-evaluation">Focal evaluation<a class="anchor" aria-label="anchor" href="#focal-evaluation"></a>
</h3>
<p><strong><em>Focal evaluation functions:</em></strong> <code><a href="../reference/anchor.seed.html">anchor.seed()</a></code>, <code><a href="../reference/cond.4.nofn.html">cond.4.nofn()</a></code>, <code><a href="../reference/cond.reclass.html">cond.reclass()</a></code>, <code><a href="../reference/reclass.nbs.html">reclass.nbs()</a></code> and <code><a href="../reference/classify.all.html">classify.all()</a></code>.</p>
<p>Classification rules are only tested at specific positions on a raster. The positions where rules are tested are identified based on their contiguity or continuity to focal cells.</p>
<div class="section level4">
<h4 id="contiguity">Class contiguity<a class="anchor" aria-label="anchor" href="#contiguity"></a>
</h4>
<p>Classification rules are applied only to raster cells in the <a href="scapesClassification_01_1_FormatInputs.html#list-of-neighborhoods">neighborhood</a> of focal cells (<a href="#figure3">Figure 3</a>).</p>
<p><a id="figure3"></a></p>
<p><img src="fc_tc.gif" width="80%" style="display: block; margin: auto;"></p>
<div style="line-height: 0.9em; margin-bottom: 1.5em;">
<span class="legend"><strong>Figure 3 - Class contiguity</strong>. Classification rule applied only to test cells in the neighborhoods of focal cells. Positive evaluations are showed in dark green; negative evaluations in dark red.</span>
</div>
</div>
<div class="section level4">
<h4 id="continuity">Class continuity<a class="anchor" aria-label="anchor" href="#continuity"></a>
</h4>
<p>Classification rules are applied to raster cells in the <a href="scapesClassification_01_1_FormatInputs.html#list-of-neighborhoods">neighborhood</a> of focal cells. Focal cells are updated at each iteration; test cells classified in one iteration become the focal cells of the next iteration. In this way, cells that respect the same rule(s) and that are connected the same focal cells are joined into the same class (<a href="#figure4">Figure 4</a>).</p>
<p><a id="figure4"></a></p>
<p><img src="ccont.gif" width="80%" style="display: block; margin: auto;"></p>
<div style="line-height: 0.9em; margin-bottom: 1.5em;">
<span class="legend"><strong>Figure 4 - Class continuity.</strong> Classification rule applied only to test cells in the neighborhoods of focal cells. Test cells classified in one iteration become focal cells in the next iteration. Positive evaluations are showed in dark green; negative evaluations in dark red.</span>
</div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="cr">Classification rules<a class="anchor" aria-label="anchor" href="#cr"></a>
</h2>
<p>In the context of <code>scapesClassification</code>, classification rules have the following characteristics:</p>
<ul>
<li><p>Evaluate either to true or false and determine what raster cells have to be classified;</p></li>
<li><p>Can be absolute (compare cell values against a threshold value) or relative (compare among the values of different cells);</p></li>
<li><p>Can consider any variable included in the attribute table (see <code><a href="../reference/attTbl.html">attTbl()</a></code> and <a href="scapesClassification_01_1_FormatInputs.html">format inputs</a>);</p></li>
<li><p>Variables are accessed by column name;</p></li>
<li><p>Are presented to individual functions in the form of a single character string.</p></li>
</ul>
<p>A detailed explanation about conditions and classification workflow in <code>scapesClassification</code> is included in the documentation of the function <code><a href="../reference/conditions.html">?conditions</a></code>.</p>
<hr>
<p><strong><em>In the following examples conditions are evaluated based on focal evaluations that consider only class contiguity.</em></strong></p>
<hr>
<div class="section level3">
<h3 id="absolute-conditions">Absolute conditions<a class="anchor" aria-label="anchor" href="#absolute-conditions"></a>
</h3>
<p>Absolute conditions compare cell values against a threshold value. There are two types of absolute conditions (<a href="#figure5">Figure 5</a>):</p>
<ol style="list-style-type: decimal">
<li><p><strong>Absolute test cell condition:</strong> compares test cell values against a threshold value.</p></li>
<li>
<p><strong>Absolute neighborhood condition:</strong> compares the values of the test cell and of its neighborhood against a threshold value.</p>
<ul>
<li><p>An absolute neighborhood condition is identified by a variable name followed by curly brackets;</p></li>
<li><p>A maximum of 9 evaluations are performed for each test cell (threshold value vs. test cell and its 8-neighbors; note that a cell can have less than 8 <em>valid</em> neighbors, <a href="scapesClassification_01_1_FormatInputs.html#list-of-neighborhoods">format inputs</a>);</p></li>
<li><p>Test cells receive a classification number if the rule is true for at least as many evaluations as the ones specified by the argument <code>peval</code> (i.e., positive evaluations).</p></li>
</ul>
</li>
</ol>
<p><a id="figure5"></a></p>
<p><img src="scapesClassification_01_2_RulesEvalTypes_files/figure-html/abs_cond-1.png" width="100%" style="display: block; margin: auto;"></p>
<div style="line-height: 0.9em; margin-bottom: 1.5em;">
<span class="legend"><strong>Figure 5 - Absolute condition.</strong> (a) Test cells are classified if their value <code>&gt;=3</code>. (b) Test cells are classified if among the values of the test cell and of the test cell neighborhood at least 8/9 (<code>peval = 8/9</code>) are <code>&gt;=3</code>. Test cells are cells in the focal cell neighborhood (blue line). Positive evaluations are showed in dark green, negative evaluations in dark red.</span>
</div>
</div>
<div class="section level3">
<h3 id="relative-conditions">Relative conditions<a class="anchor" aria-label="anchor" href="#relative-conditions"></a>
</h3>
<p>Relative conditions compare among the values of different cells. There are two types of relative conditions (<a href="#figure6">Figure 6</a>):</p>
<ol style="list-style-type: decimal">
<li>
<p><strong>Relative focal cell condition:</strong> compares the test cell value against the focal cell value.</p>
<ul>
<li><p>A relative focal cell condition is identified by a variable name followed by square brackets;</p></li>
<li><p>The variable name is repeated twice, once with square brackets and once without. Square brackets indicate the focal cell value.</p></li>
</ul>
</li>
<li>
<p><strong>Relative neighborhood condition:</strong> compares the values of the test cell against the values of the test cell neighborhood.</p>
<ul>
<li><p>A relative neighborhood condition is identified by a variable name followed by curly brackets;</p></li>
<li><p>The variable name is repeated twice, once with curly brackets and once without. Curly brackets indicate the test cell neighborhood.</p></li>
<li><p>A maximum of 8 evaluations are performed for each test cell (test cell vs. 8 neighbors; note that a cell can have less than 8 <em>valid</em> neighbors, <a href="scapesClassification_01_1_FormatInputs.html#list-of-neighborhoods">format inputs</a>);</p></li>
<li><p>Test cells receive a classification number if the rule is true for at least as many evaluations as the ones specified by the argument <code>peval</code> (i.e., positive evaluations).</p></li>
</ul>
</li>
</ol>
<p><a id="figure6"></a></p>
<p><img src="scapesClassification_01_2_RulesEvalTypes_files/figure-html/rel_cond-1.png" width="100%" style="display: block; margin: auto;"></p>
<div style="line-height: 0.9em; margin-bottom: 1.5em;">
<span class="legend"><strong>Figure 6 - Relative condition.</strong> (a) Test cells are classified if the absolute difference between test and focal cells is <code>&lt;2</code>. (b) Test cells are classified if at least 7 absolute differences between a test cell and the cells in its neighborhood are <code>&lt;2</code> (<code>peval = 7/8</code>). Test cells are cells in the focal cell neighborhood (blue line). Positive evaluations are showed in dark green, negative evaluations in dark red. In (b) are showed only the evaluation of the classified test cell.</span>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Gerald H. Taranto.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '5cc755c9236170520ae6400a64cf71d5',
    indexName: 'scapesclassification',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
