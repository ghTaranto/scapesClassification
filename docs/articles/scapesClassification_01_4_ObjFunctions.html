<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Object functions • scapesClassification</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Object functions">
<meta property="og:description" content="scapesClassification">
<meta property="og:image" content="https://ghtaranto.github.io/scapesClassification/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-light navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">scapesClassification</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Implementation
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Implementation</li>
    <li>
      <a href="../articles/scapesClassification_01_1_FormatInputs.html">Format inputs</a>
    </li>
    <li>
      <a href="../articles/scapesClassification_01_2_RulesEvalTypes.html">Rule evaluation and types</a>
    </li>
    <li>
      <a href="../articles/scapesClassification_01_3_ClassFunctions.html">Classification functions</a>
    </li>
    <li>
      <a href="../articles/scapesClassification_01_4_ObjFunctions.html">Object functions</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Example
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Geomorphic management units (GMUs)</li>
    <li>
      <a href="../articles/scapesClassification_02_1_DATA.html">Format input data</a>
    </li>
    <li>
      <a href="../articles/scapesClassification_02_2_ISU.html">Island shelf unit (ISU)</a>
    </li>
    <li>
      <a href="../articles/scapesClassification_02_3_PKS.html">Peak cells (PCs)</a>
    </li>
    <li>
      <a href="../articles/scapesClassification_02_4_OBJ.html">Relief unit (RU) and raster objects (ROs)</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ghTaranto/scapesClassification" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="scapesClassification_01_4_ObjFunctions_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Object functions</h1>
                        <h4 data-toc-skip class="author">Gerald H. Taranto</h4>
            
            <h4 data-toc-skip class="date">Wed 09, March, 2022</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ghTaranto/scapesClassification/blob/HEAD/vignettes/articles/scapesClassification_01_4_ObjFunctions.Rmd" class="external-link"><code>vignettes/articles/scapesClassification_01_4_ObjFunctions.Rmd</code></a></small>
      <div class="hidden name"><code>scapesClassification_01_4_ObjFunctions.Rmd</code></div>

    </div>

    
    
<p><strong>Functions:</strong> <code><a href="../reference/cond.4.nofn.html">cond.4.nofn()</a></code>, <code><a href="../reference/anchor.seed.html">anchor.seed()</a></code>, <code><a href="../reference/pi.sgm.html">pi.sgm()</a></code>, <code><a href="../reference/obj.border.html">obj.border()</a></code> and <code><a href="../reference/obj.nbs.html">obj.nbs()</a></code>.</p>
<blockquote>
<p>Object functions are functions used to identify and manipulate raster objects.</p>
</blockquote>
<div class="section level2">
<h2 id="input-data">Input data<a class="anchor" aria-label="anchor" href="#input-data"></a>
</h2>
<p>We will use a single-layer dummy raster to illustrate <code>scapesClassification</code> functions. We will start by computing its <a href="scapesClassification_01_1_FormatInputs.html#attribute-table">attribute table</a> (where the raster is named <code>"dummy_var"</code>) and its <a href="scapesClassification_01_1_FormatInputs.html#list-of-neighborhoods">list of neighborhoods</a>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># LOAD LIBRARIES</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ghTaranto/scapesClassification" class="external-link">scapesClassification</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/terra/" class="external-link">terra</a></span><span class="op">)</span>

<span class="co"># LOAD THE DUMMY RASTER</span>
<span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"scapesClassification"</span><span class="op">)</span>, 
                 pattern <span class="op">=</span> <span class="st">"dummy_raster\\.tif"</span>, full.names <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>
<span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># COMPUTE THE ATTRIBUTE TABLE</span>
<span class="va">at</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/attTbl.html">attTbl</a></span><span class="op">(</span><span class="va">r</span>, <span class="st">"dummy_var"</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/pkg/terra/man/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">at</span>, <span class="fl">3</span><span class="op">)</span>
<span class="co">##   Cell dummy_var</span>
<span class="co">## 1    1         1</span>
<span class="co">## 2    2         1</span>
<span class="co">## 3    3         1</span>

<span class="co"># COMPUTE THE LIST OF NEIGBORHOODS</span>
<span class="va">nbs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ngbList.html">ngbList</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/pkg/terra/man/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">nbs</span>, <span class="fl">3</span><span class="op">)</span>
<span class="co">## $`1`</span>
<span class="co">## [1] 2 8 9</span>
<span class="co">## </span>
<span class="co">## $`2`</span>
<span class="co">## [1]  1  3  8  9 10</span>
<span class="co">## </span>
<span class="co">## $`3`</span>
<span class="co">## [1]  2  4  9 10 11</span></code></pre></div>
<div class="section level3">
<h3 id="plots">Plots<a class="anchor" aria-label="anchor" href="#plots"></a>
</h3>
<p>In the following examples we will show how class vectors are computed. However, in order to improve the reading experience, the plots’ code is hidden. It can be accessed in the <code>*.RMD</code> file used to generate the html file.</p>
<p>The plotting procedure is to (i) convert a class vectors into a raster using the function <code><a href="../reference/cv.2.rast.html">cv.2.rast()</a></code> and to (ii) visualize the raster using R or an external software. In our examples we will use the R package <code>terra</code> and its function <code><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">terra::plot()</a></code>.</p>
</div>
</div>
<div class="section level2">
<h2 id="manipulation-functions">Manipulation functions<a class="anchor" aria-label="anchor" href="#manipulation-functions"></a>
</h2>
<p><strong>Functions:</strong> <code><a href="../reference/anchor.seed.html">anchor.seed()</a></code> and <code><a href="../reference/cond.4.nofn.html">cond.4.nofn()</a></code>.</p>
<p>Raster object manipulation functions can be used to identify and manipulate raster objects.</p>
<div class="section level3">
<h3 id="anchor-seed">anchor.seed<a class="anchor" aria-label="anchor" href="#anchor-seed"></a>
</h3>
<p>The function <code><a href="../reference/anchor.seed.html">anchor.seed()</a></code> can be considered as an <a href="scapesClassification_01_3_ClassFunctions.html#anchor-cell-functions">anchor cell function</a> as well as a raster object function. Its two principal uses are: (i) identify cells having particular characteristics (<em>seed cells</em>) and define around them growth and isolation buffers; (ii) assign unique IDs to groups of cells having particular characteristics.</p>
<div class="section level4">
<h4 id="condition-arguments">Condition arguments<a class="anchor" aria-label="anchor" href="#condition-arguments"></a>
</h4>
<p>The function <code><a href="../reference/anchor.seed.html">anchor.seed()</a></code> take as inputs four sets of conditions:</p>
<ol style="list-style-type: decimal">
<li><p><strong><code>cond.filter</code></strong>, the conditions to define what cells have to be evaluated by the function.</p></li>
<li><p><strong><code>cond.seed</code></strong>, the conditions to identify, at each iteration, the <em>seed cell</em>. The seed cell is the cell around which growth and isolation conditions are applied.</p></li>
<li><p><strong><code>cond.growth</code></strong>, the conditions to define a buffer around the <em>seed cell</em>.</p></li>
<li><p><strong><code>cond.isol</code></strong>, the conditions to isolate one seed cell (and its buffer) from another.</p></li>
</ol>
</div>
<div class="section level4">
<h4 id="condition-evaluation">Condition evaluation<a class="anchor" aria-label="anchor" href="#condition-evaluation"></a>
</h4>
<p>The first set of conditions to be evaluated is the <code>cond.filter</code>. The evaluation of the remaining sets of conditions is iterative (<a href="#figure1">Figure 1</a>):</p>
<ul>
<li><p>A <em>seed cell</em> is identified and receives a classification number (as specified by the argument <code>class</code>). If the argument <code>class=NULL</code>, then a new ID is assigned to every new seed cell.</p></li>
<li><p>Cells connected with the seed cell meeting the conditions of <code>cond.growth</code> are assigned to the same class of the seed cell (growth buffer). The rule evaluation take into account <a href="scapesClassification_01_2_RulesEvalTypes.html#contiguity">class continuity</a>.</p></li>
<li><p>Cells connected with the seed cell (or with its growth buffer) meeting the conditions of <code>cond.isol</code> are assigned to the isolation buffer (class = -999). The rule evaluation take into account <a href="scapesClassification_01_2_RulesEvalTypes.html#contiguity">class continuity</a>.</p></li>
<li><p>Once seed, growth and isolation cells are identified, they are ignored in all successive iterations.</p></li>
</ul>
<p>We can compute a new class vector based on the following rules. The two iterations performed by the function are showed in (<a href="#figure1">Figure 1</a>):</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="co"># Anchor seed </span></span>
<span id="cb3-2"><a href="#cb3-2"></a>cv &lt;-<span class="st"> </span><span class="kw">anchor.seed</span>(at, nbs, <span class="dt">class =</span> <span class="dv">1</span>,</span>
<span id="cb3-3"><a href="#cb3-3"></a>                  </span>
<span id="cb3-4"><a href="#cb3-4"></a>                  <span class="dt">cond.filter =</span> <span class="st">"dummy_var &gt; 2"</span>,</span>
<span id="cb3-5"><a href="#cb3-5"></a>                  <span class="dt">cond.seed   =</span> <span class="st">"dummy_var == max(dummy_var)"</span>,</span>
<span id="cb3-6"><a href="#cb3-6"></a>                  <span class="dt">cond.growth =</span> <span class="ot">NULL</span>,</span>
<span id="cb3-7"><a href="#cb3-7"></a>                  <span class="dt">cond.isol   =</span> <span class="st">"dummy_var &lt; dummy_var[]"</span>) <span class="co"># focal cell condition (see ?conditions)</span></span>
<span id="cb3-8"><a href="#cb3-8"></a><span class="co">## </span></span>
<span id="cb3-9"><a href="#cb3-9"></a><span class="co">## </span></span>
<span id="cb3-10"><a href="#cb3-10"></a> Itr<span class="fl">.1</span><span class="er">)</span> Evaluated cells<span class="op">:</span><span class="st"> </span><span class="dv">18</span><span class="op">/</span><span class="dv">22</span>; Elapsed time<span class="op">:</span><span class="st"> </span><span class="dv">0</span> mins</span>
<span id="cb3-11"><a href="#cb3-11"></a> Itr<span class="fl">.2</span><span class="er">)</span> Evaluated cells<span class="op">:</span><span class="st"> </span><span class="dv">22</span><span class="op">/</span><span class="dv">22</span>; Elapsed time<span class="op">:</span><span class="st"> </span><span class="dv">0</span> mins</span>
<span id="cb3-12"><a href="#cb3-12"></a><span class="co">##  Seed cells: 2; Execution Time: 0 mins</span></span></code></pre></div>
<p><a id="figure1"></a></p>
<p><img src="scapesClassification_01_4_ObjFunctions_files/figure-html/evaluation_plot-1.png" width="95%" style="display: block; margin: auto;"></p>
<div style="line-height: 0.9em; margin-bottom: 1.5em;">
<span class="legend"><strong>Figure 1 - Anchor.seed rule evaluation</strong>. Before the iterations start, <code>cond.filter</code> determines what cells have to be evaluated. The other rules are applied in the following order: (i) <code>cond.seed</code> identifies a seed cell; (ii) <code>cond.growth</code> identifies a growth buffer around the seed cell; (iii) <code>cond.isol</code> identifies an isolation buffer around the seed cell and its growth buffer. The function runs for two iterations and identifies two seed cells.</span>
</div>
<hr>
</div>
<div class="section level4">
<h4 id="evaluation-lag">Evaluation lag<a class="anchor" aria-label="anchor" href="#evaluation-lag"></a>
</h4>
<p>The function arguments <code>lag.growth</code> and <code>lag.isol</code> control the evaluation lag of <a href="scapesClassification_01_2_RulesEvalTypes.html#relative-conditions">relative focal cell conditions</a> (<a href="#figure2">Figure 2</a>).</p>
<ul>
<li><p>When <code>lag.*</code> are set to 0, relative focal cell conditions have a standard behavior and compare the values of the <a href="scapesClassification_01_2_RulesEvalTypes.html#en">test cells</a> against the value of the <a href="scapesClassification_01_2_RulesEvalTypes.html#en">focal cell</a>.</p></li>
<li><p>When <code>lag.*</code> are set to <code>Inf</code>, relative focal cell conditions compare the value of the <a href="scapesClassification_01_2_RulesEvalTypes.html#en">test cells</a> against the value of the seed cell identified at the start of the iteration.</p></li>
</ul>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="co"># a. lag.growth=0</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>cv1 &lt;-<span class="st"> </span><span class="kw">anchor.seed</span>(at, nbs, <span class="dt">class =</span> <span class="ot">NULL</span>, <span class="co"># a new class for every seed and growth buffer</span></span>
<span id="cb4-3"><a href="#cb4-3"></a>                   <span class="dt">cond.filter =</span> <span class="st">"dummy_var&gt;1"</span>,</span>
<span id="cb4-4"><a href="#cb4-4"></a>                   <span class="dt">cond.seed   =</span> <span class="st">"dummy_var == max(dummy_var)"</span>,</span>
<span id="cb4-5"><a href="#cb4-5"></a>                   <span class="dt">cond.growth =</span> <span class="st">"dummy_var&lt;dummy_var[]"</span>, <span class="co"># focal cell condition (see ?conditions)</span></span>
<span id="cb4-6"><a href="#cb4-6"></a>                   <span class="dt">lag.growth  =</span> <span class="dv">0</span>,</span>
<span id="cb4-7"><a href="#cb4-7"></a>                   <span class="dt">cond.isol   =</span> <span class="ot">NULL</span>) </span>
<span id="cb4-8"><a href="#cb4-8"></a><span class="co">## </span></span>
<span id="cb4-9"><a href="#cb4-9"></a><span class="co">## </span></span>
<span id="cb4-10"><a href="#cb4-10"></a> Itr<span class="fl">.1</span><span class="er">)</span> Evaluated cells<span class="op">:</span><span class="st"> </span><span class="dv">22</span><span class="op">/</span><span class="dv">29</span>; Elapsed time<span class="op">:</span><span class="st"> </span><span class="dv">0</span> mins</span>
<span id="cb4-11"><a href="#cb4-11"></a> Itr<span class="fl">.2</span><span class="er">)</span> Evaluated cells<span class="op">:</span><span class="st"> </span><span class="dv">29</span><span class="op">/</span><span class="dv">29</span>; Elapsed time<span class="op">:</span><span class="st"> </span><span class="dv">0</span> mins</span>
<span id="cb4-12"><a href="#cb4-12"></a><span class="co">##  Seed cells: 2; Execution Time: 0 mins</span></span>
<span id="cb4-13"><a href="#cb4-13"></a></span>
<span id="cb4-14"><a href="#cb4-14"></a><span class="co"># b. lag.growth=Inf</span></span>
<span id="cb4-15"><a href="#cb4-15"></a>cv2 &lt;-<span class="st"> </span><span class="kw">anchor.seed</span>(at, nbs, <span class="dt">class =</span> <span class="ot">NULL</span>, <span class="co"># a new class for every seed and growth buffer</span></span>
<span id="cb4-16"><a href="#cb4-16"></a>                   <span class="dt">cond.filter =</span> <span class="st">"dummy_var&gt;1"</span>,</span>
<span id="cb4-17"><a href="#cb4-17"></a>                   <span class="dt">cond.seed   =</span> <span class="st">"dummy_var == max(dummy_var)"</span>,</span>
<span id="cb4-18"><a href="#cb4-18"></a>                   <span class="dt">cond.growth =</span> <span class="st">"dummy_var&lt;dummy_var[]"</span>, <span class="co"># focal cell condition (see ?conditions)</span></span>
<span id="cb4-19"><a href="#cb4-19"></a>                   <span class="dt">lag.growth  =</span> <span class="ot">Inf</span>,</span>
<span id="cb4-20"><a href="#cb4-20"></a>                   <span class="dt">cond.isol   =</span> <span class="ot">NULL</span>) </span>
<span id="cb4-21"><a href="#cb4-21"></a><span class="co">## </span></span>
<span id="cb4-22"><a href="#cb4-22"></a><span class="co">## </span></span>
<span id="cb4-23"><a href="#cb4-23"></a> Itr<span class="fl">.1</span><span class="er">)</span> Evaluated cells<span class="op">:</span><span class="st"> </span><span class="dv">29</span><span class="op">/</span><span class="dv">29</span>; Elapsed time<span class="op">:</span><span class="st"> </span><span class="dv">0</span> mins</span>
<span id="cb4-24"><a href="#cb4-24"></a><span class="co">##  Seed cells: 1; Execution Time: 0 mins</span></span></code></pre></div>
<p><a id="figure2"></a></p>
<p><img src="scapesClassification_01_4_ObjFunctions_files/figure-html/lag_plot-1.png" width="95%" style="display: block; margin: auto;"></p>
<div style="line-height: 0.9em; margin-bottom: 1.5em;">
<span class="legend"><strong>Figure 2 - Anchor.seed evaluation lag</strong>. The function arguments <code>lag.*</code> control the evaluation lag of relative focal cell conditions (<code>[]</code>). <strong>(a)</strong> <code>lag.growth = 0</code>, <code>cond.growth</code> compares the values of test cells against the value of the focal cell; two objects identified. <strong>(b)</strong> <code>lag.growth = Inf</code>, <code>cond.growth</code> compares the values of test cells against the value of the seed cell; one objects identified.</span>
</div>
</div>
</div>
<div class="section level3">
<h3 id="hgrowth">cond.4.nofn (hgrowth)<a class="anchor" aria-label="anchor" href="#hgrowth"></a>
</h3>
<p>The function <code><a href="../reference/cond.4.nofn.html">cond.4.nofn()</a></code> can be used to expand the borders of raster objects. This functionality is activated with the argument <code>hgrowth = TRUE</code> (<strong>homogeneous growth</strong>, see <code><a href="../reference/cond.4.nofn.html">?cond.4.nofn</a></code> for additional details).</p>
<p>In the following example we will: (i) identify peak cells (<a href="scapesClassification_01_3_ClassFunctions.html#peak-cell">peak.cell</a>), (ii) assign a unique ID to each peak (<a href="scapesClassification_01_4_ObjFunctions.html#anchor-seed">anchor.seed</a>) and (iii) use the function <code><a href="../reference/cond.4.nofn.html">cond.4.nofn()</a></code> to expand the borders of the two peak objects. The borders are expanded based on the <a href="scapesClassification_01_2_RulesEvalTypes.html#relative-conditions">focal cell rule</a> <code>dummy_var &lt;= dummy_var[]</code> and on the <a href="scapesClassification_01_2_RulesEvalTypes.html#absolute-conditions">test cell rule</a> <code>dummy_var &gt; 1</code> (<a href="#figure3">Figure 3c</a>).</p>
<p>Note that intermediate class vectors are added as column vectors in the attribute table; in this way they can be accessed by name and used in classification rules.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># IDENTIFY RASTER OBJECTS (a,b) AND RESHAPE THEIR BORDERS (c)</span>

<span class="co"># a. cv0, identify peak cells</span>
<span class="va">at</span><span class="op">$</span><span class="va">cv0</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/peak.cell.html">peak.cell</a></span><span class="op">(</span>attTbl <span class="op">=</span> <span class="va">at</span>, ngbList <span class="op">=</span> <span class="va">nbs</span>, p_edge <span class="op">=</span> <span class="cn">TRUE</span>,
                    p_col <span class="op">=</span> <span class="st">"dummy_var"</span>, p_fun <span class="op">=</span> <span class="st">"max"</span><span class="op">)</span>

<span class="co"># b. cv1, assign unique IDs</span>
<span class="va">at</span><span class="op">$</span><span class="va">cv1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/anchor.seed.html">anchor.seed</a></span><span class="op">(</span><span class="va">at</span>, <span class="va">nbs</span>, silent <span class="op">=</span> <span class="cn">TRUE</span>, class <span class="op">=</span> <span class="cn">NULL</span>, <span class="co"># a new class for every seed and growth buffer</span>
                      cond.filter <span class="op">=</span> <span class="st">"!is.na(cv0)"</span>,
                      cond.seed   <span class="op">=</span> <span class="st">"TRUE"</span><span class="op">)</span>

<span class="co"># c. cv2, homogeneous growth of raster objects                   </span>
<span class="va">at</span><span class="op">$</span><span class="va">cv2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cond.4.nofn.html">cond.4.nofn</a></span><span class="op">(</span>attTbl <span class="op">=</span> <span class="va">at</span>, ngbList <span class="op">=</span> <span class="va">nbs</span>, classVector <span class="op">=</span> <span class="va">at</span><span class="op">$</span><span class="va">cv1</span>,
                      nbs_of <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, class <span class="op">=</span> <span class="cn">NULL</span>,
                      cond <span class="op">=</span> <span class="st">"dummy_var &lt;= dummy_var[] &amp; dummy_var &gt; 1"</span>,
                      hgrowth <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># HOMOGENEOUS GROWTH </span></code></pre></div>
<p><a id="figure3"></a></p>
<p><img src="scapesClassification_01_4_ObjFunctions_files/figure-html/hgrowth_plot-1.png" width="95%" style="display: block; margin: auto;"></p>
<div style="line-height: 0.9em; margin-bottom: 1.5em;">
<span class="legend"><strong>Figure 3 - Identify raster objects and reshape their borders. (a)</strong> Two peak cells are identified. <strong>(b)</strong> A unique ID is assigned to each peak cell; <strong>(c)</strong> Homogeneous growth of raster objects; the borders of each peak object are expanded to include connected raster cells having decreasing <code>dummy_var</code> values <code>AND</code> <code>dummy_var</code> values greater than 1.</span>
</div>
</div>
</div>
<div class="section level2">
<h2 id="border-functions">Border functions<a class="anchor" aria-label="anchor" href="#border-functions"></a>
</h2>
<p><strong>Functions:</strong> <code><a href="../reference/obj.border.html">obj.border()</a></code> and <code><a href="../reference/obj.nbs.html">obj.nbs()</a></code>.</p>
<p>Raster object border functions can be used to identify the borders of raster objects.</p>
<div class="section level3">
<h3 id="obj-border">obj.border<a class="anchor" aria-label="anchor" href="#obj-border"></a>
</h3>
<p>The function <code><a href="../reference/obj.border.html">obj.border()</a></code> identifies the borders of raster objects.</p>
<p>When missing values are present on a raster surface, the function works only with raster cells identified by attribute table row indices (see <a href="scapesClassification_01_1_FormatInputs.html">format inputs</a>). When no missing value is present, row cell indices and cell numbers become equivalent (i.e. n<sup>th</sup> row correspond to the n<sup>th</sup> cell).</p>
<p>As an example we will: <strong>(i)</strong> add a missing value in the dummy raster and compute the neighborhood list with neighborhoods identified by row numbers (see <code><a href="../reference/ngbList.html">?ngbList</a></code>), <strong>(ii)</strong> re-compute the raster objects of <code>cv2</code> (<a href="#figure3">Figure 3</a>) and <strong>(iii)</strong> identify the borders of the raster objects (<a href="#figure4">Figure 4</a>).</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># (i)</span>

<span class="co"># ADD NA-VALUE</span>
<span class="va">r2</span> <span class="op">&lt;-</span> <span class="va">r</span>
<span class="va">r2</span><span class="op">[</span><span class="fl">11</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span>

<span class="co"># COMPUTE THE ATTRIBUTE TABLE</span>
<span class="va">at2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/attTbl.html">attTbl</a></span><span class="op">(</span><span class="va">r2</span>, <span class="st">"dummy_var"</span><span class="op">)</span>

<span class="co"># COMPUTE THE LIST OF NEIGBORHOODS</span>
<span class="va">nbs2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ngbList.html">ngbList</a></span><span class="op">(</span><span class="va">r2</span>, rNumb<span class="op">=</span><span class="cn">TRUE</span>, attTbl<span class="op">=</span><span class="va">at2</span><span class="op">)</span> <span class="co"># rnumb MUST be true to use obj.border</span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># (ii)</span>

<span class="co"># a. cv0, identify peak cells</span>
<span class="va">at2</span><span class="op">$</span><span class="va">cv0</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/peak.cell.html">peak.cell</a></span><span class="op">(</span><span class="va">at2</span>, <span class="va">nbs2</span>, rNumb<span class="op">=</span><span class="cn">TRUE</span>, p_edge<span class="op">=</span><span class="cn">TRUE</span>, p_col<span class="op">=</span><span class="st">"dummy_var"</span>, p_fun<span class="op">=</span><span class="st">"max"</span><span class="op">)</span>

<span class="co"># b. cv1, assign unique IDs</span>
<span class="va">at2</span><span class="op">$</span><span class="va">cv1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/anchor.seed.html">anchor.seed</a></span><span class="op">(</span><span class="va">at2</span>, <span class="va">nbs2</span>, rNumb<span class="op">=</span><span class="cn">TRUE</span>, silent<span class="op">=</span><span class="cn">TRUE</span>, cond.filter<span class="op">=</span><span class="st">"!is.na(cv0)"</span>, cond.seed<span class="op">=</span><span class="st">"TRUE"</span><span class="op">)</span>

<span class="co"># c. cv2b, homogeneous growth of raster objects                   </span>
<span class="va">at2</span><span class="op">$</span><span class="va">cv2b</span><span class="op">&lt;-</span> <span class="fu"><a href="../reference/cond.4.nofn.html">cond.4.nofn</a></span><span class="op">(</span><span class="va">at2</span>, <span class="va">nbs2</span>, rNumb<span class="op">=</span><span class="cn">TRUE</span>, classVector<span class="op">=</span><span class="va">at2</span><span class="op">$</span><span class="va">cv1</span>, nbs_of<span class="op">=</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, hgrowth<span class="op">=</span><span class="cn">TRUE</span>,
                      cond<span class="op">=</span><span class="st">"dummy_var &lt;= dummy_var[] &amp; dummy_var &gt; 1"</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># (iii)</span>

<span class="co"># RASTER OBJECTS</span>
<span class="va">RO</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/split.html" class="external-link">split</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">NROW</a></span><span class="op">(</span><span class="va">at2</span><span class="op">)</span>, <span class="va">at2</span><span class="op">$</span><span class="va">cv2b</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">RO</span><span class="op">)</span> <span class="co"># values are attribute table row indices</span>
<span class="co">## $`1`</span>
<span class="co">##  [1]  4  5  6  7 11 12 13 17 18 19 20 24 25 26 27 31 32 33 34</span>
<span class="co">## </span>
<span class="co">## $`2`</span>
<span class="co">## [1] 28 29 30 35 36 37 42 43 44</span>

<span class="co"># COMPUTE BORDERS</span>
<span class="va">RO_bd</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/obj.border.html">obj.border</a></span><span class="op">(</span><span class="va">RO</span>, <span class="va">nbs2</span>, silent <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="co"># CONVERT ROW INDICES TO CELL NUMBERS</span>
<span class="va">RO_bd1</span> <span class="op">&lt;-</span> <span class="va">at2</span><span class="op">$</span><span class="va">Cell</span><span class="op">[</span><span class="va">RO_bd</span><span class="op">[[</span><span class="st">"1"</span><span class="op">]</span><span class="op">]</span><span class="op">]</span>
<span class="va">RO_bd2</span> <span class="op">&lt;-</span> <span class="va">at2</span><span class="op">$</span><span class="va">Cell</span><span class="op">[</span><span class="va">RO_bd</span><span class="op">[[</span><span class="st">"2"</span><span class="op">]</span><span class="op">]</span><span class="op">]</span>

<span class="co"># ROW INDICES AND CELL NUMBERS ARE NOT EQUAL</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">RO_bd</span><span class="op">)</span>  <span class="co"># attribute table row indices</span>
<span class="co">## $`1`</span>
<span class="co">## [1]  4 17 24 31 32 33 34</span>
<span class="co">## </span>
<span class="co">## $`2`</span>
<span class="co">## [1] 29 28 30 37 44</span>

<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">RO_bd1</span><span class="op">)</span> <span class="co"># cell numbers</span>
<span class="co">## [1]  4 18 25 32 33 34 35</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">RO_bd2</span><span class="op">)</span>
<span class="co">## [1] 30 29 31 38 45</span>

<span class="co"># Row indices:  used by scapesClassification functions (increase function speed) </span>
<span class="co">#               have to be converted back to cell numbers before plotting</span></code></pre></div>
<p><a id="figure4"></a></p>
<p><img src="scapesClassification_01_4_ObjFunctions_files/figure-html/bord_plot-1.png" width="95%" style="display: block; margin: auto;"></p>
<div style="line-height: 0.9em; margin-bottom: 1.5em; text-align: center;">
<span class="legend"><strong>Figure 4 - Obj.border</strong> identifies the borders of raster objects.</span>
</div>
</div>
<div class="section level3">
<h3 id="obj-nbs">obj.nbs<a class="anchor" aria-label="anchor" href="#obj-nbs"></a>
</h3>
<p>The function <code><a href="../reference/obj.nbs.html">obj.nbs()</a></code> returns a named nested lists having the following characteristics:</p>
<ul>
<li><p>Each element of the list corresponds to a raster object;</p></li>
<li><p>Each element contains a named nested list whose names correspond to the IDs of neighboring raster objects;</p></li>
<li><p>The values of the nested lists identify the raster cells comprising the shared borders.</p></li>
</ul>
<p>When missing values are present on a raster surface, the function works only with raster cells identified by attribute table row indices (see <a href="scapesClassification_01_1_FormatInputs.html">format inputs</a>). When no missing value is present, row cell indices and cell numbers become equivalent (i.e. n<sup>th</sup> row correspond to the n<sup>th</sup> cell).</p>
<p>We can use the class vector <code>cv2</code> computed in the previews example (<a href="scapesClassification_01_4_ObjFunctions.html#obj-border">obj.border</a>) to illustrate how the function works.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># RASTER OBJECTS</span>
<span class="va">RO</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/split.html" class="external-link">split</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">NROW</a></span><span class="op">(</span><span class="va">at</span><span class="op">)</span>, <span class="va">at2</span><span class="op">$</span><span class="va">cv2b</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">RO</span><span class="op">)</span> <span class="co"># values are attribute table row indices</span>
<span class="co">## $`1`</span>
<span class="co">##  [1]  4  5  6  7 11 12 13 17 18 19 20 24 25 26 27 31 32 33 34</span>
<span class="co">## </span>
<span class="co">## $`2`</span>
<span class="co">## [1] 28 29 30 35 36 37 42 43 44</span>

<span class="co"># COMPUTE BORDERS</span>
<span class="va">RO_bd</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/obj.border.html">obj.border</a></span><span class="op">(</span><span class="va">RO</span>, <span class="va">nbs2</span>, silent <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># compute borders</span>

<span class="co">####################################################################################</span>
<span class="co"># COMPUTE SHARED BORDERS</span>
<span class="co">####################################################################################</span>
<span class="va">RO_shared_bd</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/obj.nbs.html">obj.nbs</a></span><span class="op">(</span><span class="va">RO_bd</span>, <span class="va">nbs2</span>, silent <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="co"># Obj.1 has as neighbor Obj.2 and cells in rows 24 and 31 comprise the shared border</span>
<span class="va">RO_shared_bd</span><span class="op">[[</span><span class="st">"1"</span><span class="op">]</span><span class="op">]</span>
<span class="co">## $`2`</span>
<span class="co">## [1] 24 31</span>

<span class="co"># Obj.2 has as neighbor Obj.1 and cells in rows 30 and 37 comprise the shared border</span>
<span class="va">RO_shared_bd</span><span class="op">[[</span><span class="st">"2"</span><span class="op">]</span><span class="op">]</span>
<span class="co">## $`1`</span>
<span class="co">## [1] 30 37</span>

<span class="co"># CONVERT ROW INDICES TO CELL NUMBERS</span>
<span class="va">sharedBD1</span> <span class="op">&lt;-</span> <span class="va">at2</span><span class="op">$</span><span class="va">Cell</span><span class="op">[</span> <span class="va">RO_shared_bd</span><span class="op">[[</span><span class="st">"1"</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="st">"2"</span><span class="op">]</span><span class="op">]</span> <span class="op">]</span>
<span class="va">sharedBD2</span> <span class="op">&lt;-</span> <span class="va">at2</span><span class="op">$</span><span class="va">Cell</span><span class="op">[</span> <span class="va">RO_shared_bd</span><span class="op">[[</span><span class="st">"2"</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="st">"1"</span><span class="op">]</span><span class="op">]</span> <span class="op">]</span></code></pre></div>
<p><a id="figure5"></a></p>
<p><img src="scapesClassification_01_4_ObjFunctions_files/figure-html/shared_bord_plot-1.png" width="95%" style="display: block; margin: auto;"></p>
<div style="line-height: 0.9em; margin-bottom: 1.5em; text-align: center;">
<span class="legend"><strong>Figure 5 - obj.nbs</strong> identifies the shared borders of raster objects.</span>
</div>
</div>
</div>
<div class="section level2">
<h2 id="position-index-functions">Position index functions<a class="anchor" aria-label="anchor" href="#position-index-functions"></a>
</h2>
<p><strong>Functions:</strong> <code><a href="../reference/rel.pi.html">rel.pi()</a></code>, <code><a href="../reference/pi.sgm.html">pi.sgm()</a></code> and <code><a href="../reference/pi.add.html">pi.add()</a></code>.</p>
<p>Raster object position index functions can be used to compute relative position indices and to use them to manipulate raster objects.</p>
<div class="section level3">
<h3 id="rel-pi">rel.pi<a class="anchor" aria-label="anchor" href="#rel-pi"></a>
</h3>
<p>The function <code><a href="../reference/rel.pi.html">rel.pi()</a></code> computes the standardized or normalized relative position index of raster objects.</p>
<ul>
<li><p><em>Standardized</em> position index values are computed with the formula <code>( x - mean(x) ) / sd(x)</code>;</p></li>
<li><p><em>Normalized</em> position index values are computed with the formula <code>( x - min(x) ) / ( max(x) - min(x) )</code>.</p></li>
</ul>
<p>In either case position index values are relative to individual raster objects: high values indicate the top positions of an object; low values indicate the bottom positions of an object. We can compute the relative position index of <code>cv2</code> (<a href="#figure3">Figure 3</a>). Results are plotted in <a href="#figure6">Figure 6</a>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># STANDARDIZED RELATIVE POSITION INDEX</span>
<span class="va">relPI_s</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rel.pi.html">rel.pi</a></span><span class="op">(</span>attTbl <span class="op">=</span> <span class="va">at</span>, RO <span class="op">=</span> <span class="st">"cv2"</span>, el <span class="op">=</span> <span class="st">"dummy_var"</span>,
                  type <span class="op">=</span> <span class="st">"s"</span><span class="op">)</span>

<span class="co"># NORMALIZED RELATIVE POSITION INDEX</span>
<span class="va">relPI_n</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rel.pi.html">rel.pi</a></span><span class="op">(</span>attTbl <span class="op">=</span> <span class="va">at</span>, RO <span class="op">=</span> <span class="st">"cv2"</span>, el <span class="op">=</span> <span class="st">"dummy_var"</span>,
                  type <span class="op">=</span> <span class="st">"n"</span><span class="op">)</span></code></pre></div>
<p><a id="figure6"></a></p>
<p><img src="scapesClassification_01_4_ObjFunctions_files/figure-html/rel_pi_plot-1.png" width="95%" style="display: block; margin: auto;"></p>
<div style="line-height: 0.9em; margin-bottom: 1.5em;">
<span class="legend"><strong>Figure 6 - rel.pi</strong> identifies the relative position index of raster objects. In the presented formulae, variable x represents the elevation values of individual raster object.</span>
</div>
</div>
<div class="section level3">
<h3 id="pi-sgm">pi.sgm<a class="anchor" aria-label="anchor" href="#pi-sgm"></a>
</h3>
<p>The function <code><a href="../reference/pi.sgm.html">pi.sgm()</a></code> segments raster objects based on position index values. As an example we will imagine that all raster values greater than 1 constitute a single raster object. We will segment the raster object at positions having normalized relative position index values of <code>0</code> (<a href="#figure7">Figure 7</a>).</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># a) initial raster object</span>
<span class="va">at</span><span class="op">$</span><span class="va">RO</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cond.4.all.html">cond.4.all</a></span><span class="op">(</span><span class="va">at</span>, <span class="st">"dummy_var &gt; 1"</span>, class <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>

<span class="co"># b) compute normalized relative position index</span>
<span class="va">at</span><span class="op">$</span><span class="va">PI</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rel.pi.html">rel.pi</a></span><span class="op">(</span>attTbl<span class="op">=</span><span class="va">at</span>, RO<span class="op">=</span><span class="st">"RO"</span>, el<span class="op">=</span><span class="st">"dummy_var"</span>, type <span class="op">=</span> <span class="st">"n"</span><span class="op">)</span>

<span class="co"># c) segment raster object</span>
<span class="va">at</span><span class="op">$</span><span class="va">ROs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pi.sgm.html">pi.sgm</a></span><span class="op">(</span><span class="va">at</span>, <span class="va">nbs</span>, RO <span class="op">=</span> <span class="st">"RO"</span>, mainPI <span class="op">=</span> <span class="st">"PI"</span>, cut.mPI <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>

<span class="co"># d) segment raster object, min number of cell is 5</span>
<span class="va">at</span><span class="op">$</span><span class="va">ROn</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pi.sgm.html">pi.sgm</a></span><span class="op">(</span><span class="va">at</span>, <span class="va">nbs</span>, RO <span class="op">=</span> <span class="st">"RO"</span>, mainPI <span class="op">=</span> <span class="st">"PI"</span>, cut.mPI <span class="op">=</span> <span class="fl">0</span>,
                 min.N <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></code></pre></div>
<p><a id="figure7"></a></p>
<p><img src="scapesClassification_01_4_ObjFunctions_files/figure-html/pi_sgm_plot-1.png" width="95%" style="display: block; margin: auto;"></p>
<div style="line-height: 0.9em; margin-bottom: 1.5em;">
<span class="legend"><strong>Figure 7 - pi.sgm</strong> segments raster objects based on position index values. <strong>(a)</strong> Initial raster object. <strong>(b)</strong> Position index values. <strong>(c)</strong> Segment on values equal to <code>0</code>. <strong>(d)</strong> Segment on values equal to <code>0</code> and remove objects with less than 5 cells.</span>
</div>
</div>
<div class="section level3">
<h3 id="pi-add">pi.add<a class="anchor" aria-label="anchor" href="#pi-add"></a>
</h3>
<p>The function <code><a href="../reference/pi.add.html">pi.add()</a></code> adds new raster objects based on position index values. As an example we will (i) slightly modify the values of our dummy variable, (ii) assume to have, initially, a single raster object, (iii) compute standardized position index values based on all dummy raster values and (iv) add <strong>disjoint</strong> raster objects with position index values greater than 0.8 (<a href="#figure8">Figure 8</a>).</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Modify dummy raster values</span>
<span class="va">r</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">45</span>,<span class="fl">46</span>,<span class="fl">47</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">6</span>
<span class="va">at</span>  <span class="op">&lt;-</span> <span class="fu"><a href="../reference/attTbl.html">attTbl</a></span><span class="op">(</span><span class="va">r</span>, <span class="st">"dummy_var"</span><span class="op">)</span><span class="co"># re-compute at</span>
<span class="va">nbs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ngbList.html">ngbList</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span>            <span class="co"># re-compute nbs</span>

<span class="co"># a) initial raster object</span>
<span class="va">at</span><span class="op">$</span><span class="va">RO</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/anchor.seed.html">anchor.seed</a></span><span class="op">(</span><span class="va">at</span>, <span class="va">nbs</span>, class<span class="op">=</span><span class="fl">1</span>, silent <span class="op">=</span> <span class="cn">TRUE</span>,
                     cond.seed   <span class="op">=</span> <span class="st">"dummy_var == 8"</span>,
                     cond.growth <span class="op">=</span> <span class="st">"dummy_var == 5"</span><span class="op">)</span>

<span class="co"># b) compute standardized relative position index</span>
<span class="va">at</span><span class="op">$</span><span class="va">PI</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="va">at</span><span class="op">$</span><span class="va">dummy_var</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/summarize-generics.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">at</span><span class="op">$</span><span class="va">dummy_var</span><span class="op">)</span><span class="op">)</span><span class="op">/</span><span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">at</span><span class="op">$</span><span class="va">dummy_var</span><span class="op">)</span>

<span class="co"># c) add raster object</span>
<span class="va">at</span><span class="op">$</span><span class="va">ROa</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pi.add.html">pi.add</a></span><span class="op">(</span><span class="va">at</span>, <span class="va">nbs</span>, RO <span class="op">=</span> <span class="st">"RO"</span>, mainPI <span class="op">=</span> <span class="st">"PI"</span>, add.mPI <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span>

<span class="co"># d) add raster object, min number of cell is 3</span>
<span class="va">at</span><span class="op">$</span><span class="va">ROn</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pi.add.html">pi.add</a></span><span class="op">(</span><span class="va">at</span>, <span class="va">nbs</span>, RO <span class="op">=</span> <span class="st">"RO"</span>, mainPI <span class="op">=</span> <span class="st">"PI"</span>, add.mPI <span class="op">=</span> <span class="fl">0.8</span>,
                 min.N <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></code></pre></div>
<p><a id="figure8"></a></p>
<p><img src="scapesClassification_01_4_ObjFunctions_files/figure-html/pi_add_plot-1.png" width="95%" style="display: block; margin: auto;"></p>
<div style="line-height: 0.9em; margin-bottom: 1.5em;">
<span class="legend"><strong>Figure 8 - pi.add</strong> adds new raster objects based on position index values. <strong>(a)</strong> Initial raster object. <strong>(b)</strong> Position index values. <strong>(c)</strong> Add raster objects composed of cells having position index values <code>&gt;0.8</code>. <strong>(d)</strong> Add raster objects composed of cells having position index values <code>&gt;0.8</code> and with at least 3 cells. Note that new raster objects are added only if they do not share any border with the initial object.</span>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Gerald H. Taranto.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '5cc755c9236170520ae6400a64cf71d5',
    indexName: 'scapesclassification',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
