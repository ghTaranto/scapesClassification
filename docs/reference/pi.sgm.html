<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Position index segmentation — pi.sgm • scapesClassification</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous"><link href="../docsearch.css" rel="stylesheet"><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Position index segmentation — pi.sgm"><meta property="og:description" content="Segment raster objects based on position index values."><meta property="og:image" content="https://ghtaranto.github.io/scapesClassification/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-light navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">scapesClassification</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Implementation
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="dropdown-header">Implementation</li>
    <li>
      <a href="../articles/scapesClassification_01_1_FormatInputs.html">Format inputs</a>
    </li>
    <li>
      <a href="../articles/scapesClassification_01_2_RulesEvalTypes.html">Rule evaluation and types</a>
    </li>
    <li>
      <a href="../articles/scapesClassification_01_3_ClassFunctions.html">Classification functions</a>
    </li>
    <li>
      <a href="../articles/scapesClassification_01_4_ObjFunctions.html">Object functions</a>
    </li>
  </ul></li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Example
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="dropdown-header">Geomorphic management units (GMUs)</li>
    <li>
      <a href="../articles/scapesClassification_02_1_DATA.html">Format input data</a>
    </li>
    <li>
      <a href="../articles/scapesClassification_02_2_ISU.html">Island shelf unit (ISU)</a>
    </li>
    <li>
      <a href="../articles/scapesClassification_02_3_PKS.html">Peak cells (PCs)</a>
    </li>
    <li>
      <a href="../articles/scapesClassification_02_4_OBJ.html">Relief unit (RU) and raster objects (ROs)</a>
    </li>
  </ul></li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/ghTaranto/scapesClassification" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul><form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off"></div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Position index segmentation</h1>
    <small class="dont-index">Source: <a href="https://github.com/ghTaranto/scapesClassification/blob/HEAD/R/piFunctions.R" class="external-link"><code>R/piFunctions.R</code></a></small>
    <div class="hidden name"><code>pi.sgm.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Segment raster objects based on position index values.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">pi.sgm</span><span class="op">(</span>
  <span class="va">attTbl</span>,
  <span class="va">ngbList</span>,
  rNumb <span class="op">=</span> <span class="cn">FALSE</span>,
  <span class="va">RO</span>,
  mainPI <span class="op">=</span> <span class="cn">NULL</span>,
  secPI <span class="op">=</span> <span class="cn">NULL</span>,
  cut.mPI <span class="op">=</span> <span class="cn">NULL</span>,
  cut.sPI <span class="op">=</span> <span class="cn">NULL</span>,
  min.N <span class="op">=</span> <span class="cn">NULL</span>,
  plot <span class="op">=</span> <span class="cn">FALSE</span>,
  r <span class="op">=</span> <span class="cn">NULL</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>attTbl</dt>
<dd><p>data.frame, the attribute table returned by the function
<code><a href="attTbl.html">attTbl</a></code>.</p></dd>
<dt>ngbList</dt>
<dd><p>list, the list of neighborhoods returned by the function
<code><a href="ngbList.html">ngbList</a></code>.</p></dd>
<dt>rNumb</dt>
<dd><p>logic, the neighborhoods of the argument <code>ngbList</code> are
identified by cell numbers (<code>rNumb=FALSE</code>) or by row numbers
(<code>rNumb=TRUE</code>) (see <code><a href="ngbList.html">ngbList</a></code>). It is advised to use row
numbers for large rasters.</p></dd>
<dt>RO</dt>
<dd><p>column name, the name of the column with the raster object IDs.</p></dd>
<dt>mainPI</dt>
<dd><p>column name, the name of the column with main position index
values.</p></dd>
<dt>secPI</dt>
<dd><p>column name, the name of the column with secondary position
index values.</p></dd>
<dt>cut.mPI</dt>
<dd><p>numeric, threshold of main position index values. Cells with
values below the threshold are excluded from raster objects.</p></dd>
<dt>cut.sPI</dt>
<dd><p>numeric, threshold of secondary position index values. Cells
with values below the threshold are excluded from raster objects.</p></dd>
<dt>min.N</dt>
<dd><p>numeric, the minimum number of cells a raster object has to have
to be included in the function output.</p></dd>
<dt>plot</dt>
<dd><p>logic, plot the results.</p></dd>
<dt>r</dt>
<dd><p>single or multi-layer raster of the class <code>SpatRaster</code> (see
<code><a href="https://rdrr.io/pkg/terra/man/rast.html" class="external-link">help("rast", terra)</a></code>) used to compute the attribute table. Required
only if <code>plot = TRUE</code>.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>The function returns a class vector with raster objects IDs. The
vector has length equal to the number of rows of the attribute table. NA
values are assigned to cells that do not belong to any raster object.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Raster objects are segmented based on position index values. Two
different position indices can be passed to the function (<code>mainPI</code> and
<code>secPI</code>).</p><ul><li><p>Input raster objects are assigned to the same class to flag cells that
are part of raster objects;</p></li>
<li><p>Cells with values below <code>mainPI</code> <strong>OR</strong> below <code>mainPI</code> are
flagged as not being part of any raster object;</p></li>
<li><p>Each non-continuous group of raster object cells will identify an output
raster object.</p></li>
<li><p>Only raster objects with at least as many cells as specified by the
argument <code>min.N</code> are included in the function output.</p></li>
<li><p>If both <code>mainPI</code> and <code>secPI</code> are equal to <code>NULL</code>, the
function will exclusively filter raster objects based on their size
(<code>min.N</code>).</p></li>
</ul></div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="attTbl.html">attTbl()</a></code>, <code><a href="ngbList.html">ngbList()</a></code>, <code><a href="rel.pi.html">rel.pi()</a></code>, <code><a href="pi.add.html">pi.add()</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co"># DUMMY DATA</span></span>
<span class="r-in"><span class="co">######################################################################################</span></span>
<span class="r-in"><span class="co"># LOAD LIBRARIES</span></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ghTaranto/scapesClassification" class="external-link">scapesClassification</a></span><span class="op">)</span></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/terra/" class="external-link">terra</a></span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># LOAD THE DUMMY RASTER</span></span>
<span class="r-in"><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"scapesClassification"</span><span class="op">)</span>,</span>
<span class="r-in">                pattern <span class="op">=</span> <span class="st">"dummy_raster\\.tif"</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-in"><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># COMPUTE THE ATTRIBUTE TABLE</span></span>
<span class="r-in"><span class="va">at</span> <span class="op">&lt;-</span> <span class="fu"><a href="attTbl.html">attTbl</a></span><span class="op">(</span><span class="va">r</span>, <span class="st">"dummy_var"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># COMPUTE THE LIST OF NEIGBORHOODS</span></span>
<span class="r-in"><span class="va">nbs</span> <span class="op">&lt;-</span> <span class="fu"><a href="ngbList.html">ngbList</a></span><span class="op">(</span><span class="va">r</span>, attTbl<span class="op">=</span><span class="va">at</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">################################################################################</span></span>
<span class="r-in"><span class="co"># COMPUTE RASTER OBJECTS</span></span>
<span class="r-in"><span class="co">################################################################################</span></span>
<span class="r-in"><span class="va">at</span><span class="op">$</span><span class="va">RO</span> <span class="op">&lt;-</span> <span class="fu"><a href="anchor.seed.html">anchor.seed</a></span><span class="op">(</span><span class="va">at</span>, <span class="va">nbs</span>, silent<span class="op">=</span><span class="cn">TRUE</span>, class <span class="op">=</span> <span class="cn">NULL</span>, rNumb<span class="op">=</span><span class="cn">TRUE</span>,</span>
<span class="r-in">                     cond.filter <span class="op">=</span> <span class="st">"dummy_var &gt; 1"</span>,</span>
<span class="r-in">                     cond.seed   <span class="op">=</span> <span class="st">"dummy_var==max(dummy_var)"</span>,</span>
<span class="r-in">                     cond.growth <span class="op">=</span> <span class="st">"dummy_var&lt;dummy_var[]"</span>,</span>
<span class="r-in">                     lag.growth  <span class="op">=</span> <span class="cn">Inf</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># One input raster object</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/pkg/terra/man/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">at</span><span class="op">$</span><span class="va">RO</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] NA  1</span>
<span class="r-in"></span>
<span class="r-in"><span class="co">################################################################################</span></span>
<span class="r-in"><span class="co"># NORMALIZED RELATIVE POSITION INDEX</span></span>
<span class="r-in"><span class="co">################################################################################</span></span>
<span class="r-in"><span class="va">at</span><span class="op">$</span><span class="va">relPI</span> <span class="op">&lt;-</span> <span class="fu"><a href="rel.pi.html">rel.pi</a></span><span class="op">(</span>attTbl <span class="op">=</span> <span class="va">at</span>, RO <span class="op">=</span> <span class="st">"RO"</span>, el <span class="op">=</span> <span class="st">"dummy_var"</span>, type <span class="op">=</span> <span class="st">"n"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">################################################################################</span></span>
<span class="r-in"><span class="co"># POSITION INDEX SEGMENTATION</span></span>
<span class="r-in"><span class="co">################################################################################</span></span>
<span class="r-in"><span class="va">RO1</span> <span class="op">&lt;-</span> <span class="fu">pi.sgm</span><span class="op">(</span><span class="va">at</span>, <span class="va">nbs</span>,</span>
<span class="r-in">              RO <span class="op">=</span> <span class="st">"RO"</span>,        <span class="co"># Raster objects</span></span>
<span class="r-in">              mainPI <span class="op">=</span> <span class="st">"relPI"</span>, <span class="co"># PI segmentation layer</span></span>
<span class="r-in">              cut.mPI <span class="op">=</span> <span class="fl">0</span>,      <span class="co"># segment on relPI values &lt;= 0</span></span>
<span class="r-in">              plot <span class="op">=</span> <span class="cn">TRUE</span>, r <span class="op">=</span> <span class="va">r</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">graphics</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/graphics/layout.html" class="external-link">layout</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, nrow<span class="op">=</span><span class="fl">1</span>, byrow<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/pkg/terra/man/text.html" class="external-link">text</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/xyCellFrom.html" class="external-link">xyFromCell</a></span><span class="op">(</span><span class="va">r</span>,<span class="va">at</span><span class="op">$</span><span class="va">Cell</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/math-generics.html" class="external-link">round</a></span><span class="op">(</span><span class="va">at</span><span class="op">$</span><span class="va">relPI</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="co"># visualize relPI</span></span>
<span class="r-plt img"><img src="pi.sgm-1.png" alt="" width="700" height="433"></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Two output raster objects</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/pkg/terra/man/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">RO1</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] NA  1  2</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Gerald H. Taranto.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer></div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '5cc755c9236170520ae6400a64cf71d5',
    indexName: 'scapesclassification',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script></body></html>

